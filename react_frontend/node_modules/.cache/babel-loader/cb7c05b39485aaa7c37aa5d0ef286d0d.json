{"ast":null,"code":"import _toConsumableArray from\"/Users/kierarobinson/Downloads/learning-app-main 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/kierarobinson/Downloads/learning-app-main 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kierarobinson/Downloads/learning-app-main 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kierarobinson/Downloads/learning-app-main 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kierarobinson/Downloads/learning-app-main 2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Bar}from'react-chartjs-2';import'chart.js';import EnergyDistribution from'./EnergyDistribution';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var days=['Hourly energy use (Wh)','Hourly energy intensity (lbs CO2/kWh)'];var dataUnits=['watt-hours','lbs CO2/kWh'];var dataLabel=['energy','intensity'];var GraphInfoContainer_u_a1=/*#__PURE__*/function(_React$Component){_inherits(GraphInfoContainer_u_a1,_React$Component);var _super=_createSuper(GraphInfoContainer_u_a1);function GraphInfoContainer_u_a1(props){var _this;_classCallCheck(this,GraphInfoContainer_u_a1);_this=_super.call(this,props);_this.toggleDayWeek=function(){_this.setState({toggle:(_this.state.toggle+1)%2});};_this.setConsumptionGraph=function(){_this.setState({toggle:0});};_this.setIntensityGraph=function(){_this.setState({toggle:1});};_this.getCorrectLabels=function(){if(_this.state.toggle)return _this.state.ilabels;else return _this.state.clabels;};_this.getCorrectValues=function(){if(_this.state.toggle)return _this.state.ivalues;else return _this.state.cvalues;};_this.state={graphH:140,graphW:503,graphColor:'#0D6CA1',clabels:[],cvalues:[],ilabels:[],ivalues:[],toggle:0};return _this;}_createClass(GraphInfoContainer_u_a1,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.fetchGraphInfo();this.timer=setInterval(function(){return _this2.toggleDayWeek();},60000);this.timer2=setInterval(function(){return _this2.fetchGraphInfo();},120000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.timer&&clearInterval(this.timer);this.timer=false;this.timer2&&clearInterval(this.timer2);this.timer2=false;}},{key:\"fetchGraphInfo\",value:function fetchGraphInfo(){this.fetchIntensity();this.fetchConsumption();}},{key:\"fetchIntensity\",value:function fetchIntensity(){var _this3=this;var mounted=true;fetch('http://140.180.133.113:4545/api/v1/resources/campus_energy_intensity/24hr').then(function(response){return response.json();}).then(function(results){if(mounted){if(results.campus_energy_intensity&&Object.keys(results.campus_energy_intensity)){_this3.setState({ilabels:Object.keys(results.campus_energy_intensity),ivalues:Object.values(results.campus_energy_intensity)});}}});return function(){return mounted=false;};}},{key:\"fetchConsumption\",value:function fetchConsumption(){var _this4=this;var mounted=true;fetch('http://140.180.133.113:4545/api/v1/resources/u/a6/dorm_power_co2/current').then(function(response){return response.json();}).then(function(results){if(mounted){if(results.daily_graph_energy_wh_data&&Object.keys(results.daily_graph_energy_wh_data)){_this4.setState({clabels:Object.keys(results.daily_graph_energy_wh_data),cvalues:Object.values(results.daily_graph_energy_wh_data)});}}});return function(){return mounted=false;};}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{class:\"graphContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"colorBox\",style:{backgroundColor:this.state.graphColor,width:this.state.graphW,height:this.state.graphH,margin:0},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"energy tracker|currently displaying: \",/*#__PURE__*/_jsx(\"b\",{children:days[this.state.toggle]})]}),/*#__PURE__*/_jsx(Bar,{ref:this.chartReference,data:{labels:this.getCorrectLabels(),datasets:[{label:dataLabel[this.state.toggle],data:this.getCorrectValues(),backgroundColor:'#fff'}]},width:460,height:100,options:{maintainAspectRatio:false,legend:{display:false},scales:{yAxes:[{position:'right',gridLines:[{display:false}],ticks:{fontColor:'#fff',fontSize:8,maxTicksLimit:5,padding:10,min:this.state.toggle?Math.round((Math.min.apply(Math,_toConsumableArray(this.state.ivalues))-.1)/.1)*.1:Math.round(Math.max(Math.min.apply(Math,_toConsumableArray(this.state.cvalues))-100,0)/100)*100},scaleLabel:{display:true,labelString:dataUnits[this.state.toggle],fontColor:'#fff',fontSize:8}}],xAxes:[{// display: true, // change this to false to remove x-axis labels\ndisplay:false,// change this to false to remove x-axis labels\nticks:{maxTicksLimit:4,fontColor:'#fff',fontSize:8,align:'center'}}]},dataset:{barPercentage:.95},layout:{padding:{left:0,right:-4,top:10,bottom:12}}}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"lowerContainer\",style:{marginTop:10},children:[/*#__PURE__*/_jsxs(\"div\",{class:\"buttonContainer\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"defaultButton\",onClick:this.setConsumptionGraph,children:\"display personal energy use\"}),/*#__PURE__*/_jsx(\"button\",{class:\"defaultButton\",onClick:this.setIntensityGraph,children:\"display campus energy intensity\"})]}),/*#__PURE__*/_jsx(EnergyDistribution,{})]})]});}}]);return GraphInfoContainer_u_a1;}(React.Component);export default GraphInfoContainer_u_a1;","map":{"version":3,"sources":["/Users/kierarobinson/Downloads/learning-app-main 2/src/components/user_specific/u_a6/GraphInfoContainer_u_a6.js"],"names":["React","Bar","EnergyDistribution","days","dataUnits","dataLabel","GraphInfoContainer_u_a1","props","toggleDayWeek","setState","toggle","state","setConsumptionGraph","setIntensityGraph","getCorrectLabels","ilabels","clabels","getCorrectValues","ivalues","cvalues","graphH","graphW","graphColor","fetchGraphInfo","timer","setInterval","timer2","clearInterval","fetchIntensity","fetchConsumption","mounted","fetch","then","response","json","results","campus_energy_intensity","Object","keys","values","daily_graph_energy_wh_data","backgroundColor","width","height","margin","chartReference","labels","datasets","label","data","maintainAspectRatio","legend","display","scales","yAxes","position","gridLines","ticks","fontColor","fontSize","maxTicksLimit","padding","min","Math","round","max","scaleLabel","labelString","xAxes","align","dataset","barPercentage","layout","left","right","top","bottom","marginTop","Component"],"mappings":"q0BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,iBAApB,CACA,MAAO,UAAP,CACA,MAAOC,CAAAA,kBAAP,KAA+B,sBAA/B,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,CAAC,wBAAD,CAA2B,uCAA3B,CAAb,CACA,GAAMC,CAAAA,SAAS,CAAG,CAAC,YAAD,CAAe,aAAf,CAAlB,CACA,GAAMC,CAAAA,SAAS,CAAG,CAAC,QAAD,CAAW,WAAX,CAAlB,C,GAEMC,CAAAA,uB,8IACF,iCAAYC,KAAZ,CAAmB,yDACf,uBAAMA,KAAN,EADe,MAkEnBC,aAlEmB,CAkEH,UAAM,CAClB,MAAKC,QAAL,CAAc,CAAEC,MAAM,CAAE,CAAC,MAAKC,KAAL,CAAWD,MAAX,CAAkB,CAAnB,EAAsB,CAAhC,CAAd,EACH,CApEkB,OAsEnBE,mBAtEmB,CAsEG,UAAM,CACxB,MAAKH,QAAL,CAAc,CAAEC,MAAM,CAAE,CAAV,CAAd,EACH,CAxEkB,OA0EnBG,iBA1EmB,CA0EC,UAAM,CACtB,MAAKJ,QAAL,CAAc,CAAEC,MAAM,CAAE,CAAV,CAAd,EACH,CA5EkB,OA8EnBI,gBA9EmB,CA8EA,UAAM,CACrB,GAAG,MAAKH,KAAL,CAAWD,MAAd,CAAsB,MAAO,OAAKC,KAAL,CAAWI,OAAlB,CAAtB,IACK,OAAO,OAAKJ,KAAL,CAAWK,OAAlB,CACR,CAjFkB,OAmFnBC,gBAnFmB,CAmFA,UAAM,CACrB,GAAG,MAAKN,KAAL,CAAWD,MAAd,CAAsB,MAAO,OAAKC,KAAL,CAAWO,OAAlB,CAAtB,IACK,OAAO,OAAKP,KAAL,CAAWQ,OAAlB,CACR,CAtFkB,CAEf,MAAKR,KAAL,CAAa,CACTS,MAAM,CAAE,GADC,CAETC,MAAM,CAAE,GAFC,CAGTC,UAAU,CAAE,SAHH,CAITN,OAAO,CAAE,EAJA,CAKTG,OAAO,CAAE,EALA,CAMTJ,OAAO,CAAE,EANA,CAOTG,OAAO,CAAE,EAPA,CAQTR,MAAM,CAAE,CARC,CAAb,CAFe,aAYlB,C,qEAED,4BAAoB,iBAChB,KAAKa,cAAL,GACA,KAAKC,KAAL,CAAaC,WAAW,CAAC,iBAAM,CAAA,MAAI,CAACjB,aAAL,EAAN,EAAD,CAA6B,KAA7B,CAAxB,CACA,KAAKkB,MAAL,CAAcD,WAAW,CAAC,iBAAM,CAAA,MAAI,CAACF,cAAL,EAAN,EAAD,CAA8B,MAA9B,CAAzB,CACH,C,oCAED,+BAAwB,CACpB,KAAKC,KAAL,EAAcG,aAAa,CAAC,KAAKH,KAAN,CAA3B,CACA,KAAKA,KAAL,CAAa,KAAb,CACA,KAAKE,MAAL,EAAeC,aAAa,CAAC,KAAKD,MAAN,CAA5B,CACA,KAAKA,MAAL,CAAc,KAAd,CACH,C,8BAED,yBAAiB,CACb,KAAKE,cAAL,GACA,KAAKC,gBAAL,GACH,C,8BAED,yBAAiB,iBACb,GAAIC,CAAAA,OAAO,CAAG,IAAd,CACAC,KAAK,CAAC,2EAAD,CAAL,CACKC,IADL,CACU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADlB,EAEKF,IAFL,CAEU,SAAAG,OAAO,CAAI,CACb,GAAGL,OAAH,CAAY,CACR,GAAIK,OAAO,CAACC,uBAAR,EAAmCC,MAAM,CAACC,IAAP,CAAYH,OAAO,CAACC,uBAApB,CAAvC,CAAqF,CACjF,MAAI,CAAC3B,QAAL,CAAc,CACVM,OAAO,CAAEsB,MAAM,CAACC,IAAP,CAAYH,OAAO,CAACC,uBAApB,CADC,CAEVlB,OAAO,CAAEmB,MAAM,CAACE,MAAP,CAAcJ,OAAO,CAACC,uBAAtB,CAFC,CAAd,EAIH,CACJ,CACJ,CAXL,EAYA,MAAO,kBAAMN,CAAAA,OAAO,CAAG,KAAhB,EAAP,CACH,C,gCAED,2BAAmB,iBACf,GAAIA,CAAAA,OAAO,CAAG,IAAd,CACAC,KAAK,CAAC,0EAAD,CAAL,CACKC,IADL,CACU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADlB,EAEKF,IAFL,CAEU,SAAAG,OAAO,CAAI,CACb,GAAGL,OAAH,CAAY,CACR,GAAIK,OAAO,CAACK,0BAAR,EAAsCH,MAAM,CAACC,IAAP,CAAYH,OAAO,CAACK,0BAApB,CAA1C,CAA2F,CACvF,MAAI,CAAC/B,QAAL,CAAc,CACVO,OAAO,CAAEqB,MAAM,CAACC,IAAP,CAAYH,OAAO,CAACK,0BAApB,CADC,CAEVrB,OAAO,CAAEkB,MAAM,CAACE,MAAP,CAAcJ,OAAO,CAACK,0BAAtB,CAFC,CAAd,EAIH,CACJ,CACJ,CAXL,EAYA,MAAO,kBAAMV,CAAAA,OAAO,CAAG,KAAhB,EAAP,CACH,C,sBAwBD,iBAAS,CACL,mBACI,aAAK,KAAK,CAAC,gBAAX,wBACI,aAAK,KAAK,CAAC,UAAX,CAAsB,KAAK,CAAE,CAAEW,eAAe,CAAE,KAAK9B,KAAL,CAAWW,UAA9B,CAA0CoB,KAAK,CAAE,KAAK/B,KAAL,CAAWU,MAA5D,CACLsB,MAAM,CAAE,KAAKhC,KAAL,CAAWS,MADd,CACsBwB,MAAM,CAAE,CAD9B,CAA7B,wBAEA,2EAAyC,mBAAIzC,IAAI,CAAC,KAAKQ,KAAL,CAAWD,MAAZ,CAAR,EAAzC,GAFA,cAGA,KAAC,GAAD,EAAK,GAAG,CAAE,KAAKmC,cAAf,CACA,IAAI,CAAE,CACFC,MAAM,CAAE,KAAKhC,gBAAL,EADN,CAEFiC,QAAQ,CAAC,CAAC,CACNC,KAAK,CAAE3C,SAAS,CAAC,KAAKM,KAAL,CAAWD,MAAZ,CADV,CAENuC,IAAI,CAAE,KAAKhC,gBAAL,EAFA,CAGNwB,eAAe,CAAE,MAHX,CAAD,CAFP,CADN,CAUA,KAAK,CAAE,GAVP,CAUY,MAAM,CAAE,GAVpB,CAWA,OAAO,CAAE,CACLS,mBAAmB,CAAE,KADhB,CAELC,MAAM,CAAE,CAAEC,OAAO,CAAE,KAAX,CAFH,CAGLC,MAAM,CAAE,CACJC,KAAK,CAAE,CAAC,CACJC,QAAQ,CAAE,OADN,CAEJC,SAAS,CAAE,CAAC,CAAEJ,OAAO,CAAE,KAAX,CAAD,CAFP,CAGJK,KAAK,CAAE,CACHC,SAAS,CAAE,MADR,CAEHC,QAAQ,CAAE,CAFP,CAGHC,aAAa,CAAE,CAHZ,CAIHC,OAAO,CAAE,EAJN,CAKHC,GAAG,CAAE,KAAKnD,KAAL,CAAWD,MAAX,CAAoBqD,IAAI,CAACC,KAAL,CAAW,CAACD,IAAI,CAACD,GAAL,OAAAC,IAAI,oBAAQ,KAAKpD,KAAL,CAAWO,OAAnB,EAAJ,CAAgC,EAAjC,EAAqC,EAAhD,EAAoD,EAAxE,CACoB6C,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAASF,IAAI,CAACD,GAAL,OAAAC,IAAI,oBAAQ,KAAKpD,KAAL,CAAWQ,OAAnB,EAAJ,CAAgC,GAAzC,CAA8C,CAA9C,EAAiD,GAA5D,EAAiE,GANvF,CAHH,CAWJ+C,UAAU,CAAE,CACRd,OAAO,CAAE,IADD,CAERe,WAAW,CAAE/D,SAAS,CAAC,KAAKO,KAAL,CAAWD,MAAZ,CAFd,CAGRgD,SAAS,CAAE,MAHH,CAIRC,QAAQ,CAAE,CAJF,CAXR,CAAD,CADH,CAmBJS,KAAK,CAAE,CAAC,CACJ;AACAhB,OAAO,CAAE,KAFL,CAEY;AAChBK,KAAK,CAAE,CACHG,aAAa,CAAE,CADZ,CAEHF,SAAS,CAAE,MAFR,CAGHC,QAAQ,CAAE,CAHP,CAIHU,KAAK,CAAE,QAJJ,CAHH,CAAD,CAnBH,CAHH,CAiCLC,OAAO,CAAE,CAAEC,aAAa,CAAE,GAAjB,CAjCJ,CAkCLC,MAAM,CAAE,CACJX,OAAO,CAAE,CACLY,IAAI,CAAE,CADD,CAELC,KAAK,CAAE,CAAC,CAFH,CAGLC,GAAG,CAAE,EAHA,CAILC,MAAM,CAAE,EAJH,CADL,CAlCH,CAXT,EAHA,GADJ,cA6DI,aAAK,KAAK,CAAC,gBAAX,CAA4B,KAAK,CAAE,CAAEC,SAAS,CAAE,EAAb,CAAnC,wBACI,aAAK,KAAK,CAAC,iBAAX,wBACI,eAAQ,KAAK,CAAC,eAAd,CAA8B,OAAO,CAAE,KAAKjE,mBAA5C,yCADJ,cAEI,eAAQ,KAAK,CAAC,eAAd,CAA8B,OAAO,CAAE,KAAKC,iBAA5C,6CAFJ,GADJ,cAKI,KAAC,kBAAD,IALJ,GA7DJ,GADJ,CAuEH,C,qCAjKiCb,KAAK,CAAC8E,S,EAoK5C,cAAexE,CAAAA,uBAAf","sourcesContent":["import React from 'react'\nimport { Bar } from 'react-chartjs-2';\nimport 'chart.js'\nimport EnergyDistribution from './EnergyDistribution'\n\nconst days = ['Hourly energy use (Wh)', 'Hourly energy intensity (lbs CO2/kWh)']\nconst dataUnits = ['watt-hours', 'lbs CO2/kWh']\nconst dataLabel = ['energy', 'intensity']\n\nclass GraphInfoContainer_u_a1 extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            graphH: 140,\n            graphW: 503,\n            graphColor: '#0D6CA1',\n            clabels: [],\n            cvalues: [],\n            ilabels: [],\n            ivalues: [],\n            toggle: 0,\n        }\n    }\n    \n    componentDidMount() {\n        this.fetchGraphInfo();\n        this.timer = setInterval(() => this.toggleDayWeek(), 60000);\n        this.timer2 = setInterval(() => this.fetchGraphInfo(), 120000);\n    }\n\n    componentWillUnmount () {\n        this.timer && clearInterval(this.timer);\n        this.timer = false;\n        this.timer2 && clearInterval(this.timer2);\n        this.timer2 = false;\n    }\n\n    fetchGraphInfo() {\n        this.fetchIntensity();\n        this.fetchConsumption();\n    }\n\n    fetchIntensity() {\n        let mounted = true;\n        fetch('http://140.180.133.113:4545/api/v1/resources/campus_energy_intensity/24hr')\n            .then(response => response.json())\n            .then(results => {\n                if(mounted) {\n                    if (results.campus_energy_intensity && Object.keys(results.campus_energy_intensity)) {\n                        this.setState({\n                            ilabels: Object.keys(results.campus_energy_intensity),\n                            ivalues: Object.values(results.campus_energy_intensity),\n                        });\n                    }\n                }\n            })\n        return () => mounted = false;\n    }\n\n    fetchConsumption() {\n        let mounted = true;\n        fetch('http://140.180.133.113:4545/api/v1/resources/u/a6/dorm_power_co2/current')\n            .then(response => response.json())\n            .then(results => {\n                if(mounted) {\n                    if (results.daily_graph_energy_wh_data && Object.keys(results.daily_graph_energy_wh_data)) {\n                        this.setState({\n                            clabels: Object.keys(results.daily_graph_energy_wh_data),\n                            cvalues: Object.values(results.daily_graph_energy_wh_data),\n                        });\n                    }\n                }\n            })\n        return () => mounted = false;\n    }\n\n    toggleDayWeek = () => {\n        this.setState({ toggle: (this.state.toggle+1)%2 });\n    }\n\n    setConsumptionGraph = () => {\n        this.setState({ toggle: 0 })\n    }\n\n    setIntensityGraph = () => {\n        this.setState({ toggle: 1 })\n    }\n\n    getCorrectLabels = () => {\n        if(this.state.toggle) return this.state.ilabels;\n        else return this.state.clabels;\n    }\n\n    getCorrectValues = () => {\n        if(this.state.toggle) return this.state.ivalues;\n        else return this.state.cvalues;\n    }\n\n    render() {\n        return (\n            <div class='graphContainer'>\n                <div class='colorBox' style={{ backgroundColor: this.state.graphColor, width: this.state.graphW, \n                                        height: this.state.graphH, margin: 0}}>\n                <h1>energy tracker|currently displaying: <b>{days[this.state.toggle]}</b></h1>\n                <Bar ref={this.chartReference}\n                data={{\n                    labels: this.getCorrectLabels(),\n                    datasets:[{\n                        label: dataLabel[this.state.toggle],\n                        data: this.getCorrectValues(),\n                        backgroundColor: '#fff',\n                    }]\n\n                }} \n                width={460} height={100}\n                options={{\n                    maintainAspectRatio: false,\n                    legend: { display: false },\n                    scales: {\n                        yAxes: [{ \n                            position: 'right',\n                            gridLines: [{ display: false }],\n                            ticks: { \n                                fontColor: '#fff',\n                                fontSize: 8,\n                                maxTicksLimit: 5,\n                                padding: 10,\n                                min: this.state.toggle ? Math.round((Math.min(...this.state.ivalues)-.1)/.1)*.1 : \n                                                         Math.round(Math.max(Math.min(...this.state.cvalues)-100, 0)/100)*100,\n                            },\n                            scaleLabel: {\n                                display: true,\n                                labelString: dataUnits[this.state.toggle],\n                                fontColor: '#fff',\n                                fontSize: 8,\n                            },\n                        }],\n                        xAxes: [{ \n                            // display: true, // change this to false to remove x-axis labels\n                            display: false, // change this to false to remove x-axis labels\n                            ticks: {\n                                maxTicksLimit: 4,\n                                fontColor: '#fff',\n                                fontSize: 8,\n                                align: 'center',\n                            }\n                        }],\n                    },\n                    dataset: { barPercentage: .95, },\n                    layout: {\n                        padding: {\n                            left: 0,\n                            right: -4,\n                            top: 10,\n                            bottom: 12,\n                        }\n                    }\n                }}\n                />\n            </div>\n            \n                <div class='lowerContainer' style={{ marginTop: 10 }}>\n                    <div class='buttonContainer'>\n                        <button class=\"defaultButton\" onClick={this.setConsumptionGraph}>display personal energy use</button>\n                        <button class=\"defaultButton\" onClick={this.setIntensityGraph}>display campus energy intensity</button>\n                    </div>\n                    <EnergyDistribution />\n                </div>\n            </div>\n        )\n    }  \n}\n\nexport default GraphInfoContainer_u_a1\n"]},"metadata":{},"sourceType":"module"}